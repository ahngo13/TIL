# 처음 배우는 블록체인

## 블록체인과 암호화폐

블록체인은 암호화폐 '비트코인'을 지원하려고 만든 기술이다.

장점 - 다양한 분야에 관리자 없이도 안전을 보장하는 거래 시스템을 만들 수 있다.

단점 - 은행은 존재를 고민해야하고 국가는 화폐 가치를 관리할 수 없으므로 사회적 혼란이 발생할 수 있다.



### 대칭키 암호 방식

장점 - 암호화와 복호화 속도가 빠르다.

단점 - 사용자가 늘어날 때마다 대칭키를 계속 생성 관리해야 한다.



### 공개키 암호 방식

암호화에 사용하는 공개키와 복호화에 사용하는 비밀키를 분리한 후 암호화에 사용하는 키를 공개키로 공유함.

비밀키(=개인키)가 있는 사람만 원 데이터를 얻을 수 있음.



### 비트코인의 등장과 보급

P2P 네트워크를 악의적인 목적으로 이용하려는 사람을 막는 기술 기반을 마련



### 이더리움의 등장

누구나 자유롭게 새 블록체인 애플리케이션을 만들어 배포할 수 있는 플랫폼



### 비즈니스 활용

리눅스 재단에서 블록체인 기반 오픈 소스 소프트웨어를 개발하는 '하이퍼레저 프로젝트'를 시작



## 블록체인 이해하기

블록체인과 타임스탬프 사이에는 깊은 연관성이 있다.

### 타임스탬프

- '2017-10-17 18:00:00' 같은 형식으로 날짜와 시간을 표시하는 문자열

- 거래사실을 증명하는데 중요한 역할

#### 타임스탬프 특성

1. 모두가 같은 시간 흐름을 공유
2. 시간을 되돌릴 수 없음



#### 타임스탬프의 문제점

1. 실제 시간과 컴퓨터에 설정된 시간이 같다고 보장할 수 없음.
2. 별도의 설정이나 애플리케이션으로 사용자가 쉽게 변경할 수 있음.



#### 중앙집중형 시스템과 타임스탬프

- 데이터 무결성을 유지하기 쉬움.

- 작업 처리량에 따라 서비스 전체 상태에 영향을 줌.



#### 탈중앙화 시스템과 타임스탬프

- 노드의 자원을 모아 사용하므로 관리자 없는 시스템을 만들기 쉬움

- 데이터 무결성을 유지하지 어려우므로 타임스탬프 신뢰성 보장이 어려움

- 블록체인은 기존 P2P 시스템과 다른 타임스탬프 구조를 포함한 '탈중앙화 시스템'을 구축한 것



#### 해시체인 타임스탬프

- 절대시각 대신 시각 2개의 앞뒤 순서를 구분 할 수 있는 상대시각으로 시간 흐름을 정의

- 블록체인은 암호화 해시 함수롤 논리 데이터 저장 순서를 정의

- 대표적인 예는 SHA-256

##### 해시 체인

데이터 하나에 재귀적으로 암호화 해시 함수를 적용한 기술

**해시 체인 타임스탬프는 새로운 데이터를 추가할 때마다 1씩 증가**



#### 해시 체인과 해시 트리 타임스탬프

1. P2P 네트워크의 모든 노드가 항상 최신 타임스탬프를 확인할 수 있어야 함.
2. 어떤 노드에서 과거 데이터를 조작했음을 확인하거나 데이터 조작 자체를 막을 수 있어야 함.

**블록은 해시트리를 해시체인으로 구성해 만듦.**



#### 해시트리(= 머클 트리)

렐프 머클이 제안

1. 해시트리는 어떤 데이터를 여러 조각으로 나눈 후 조각 2개를 묶어 해시값을 계산

2. 홀수면 같은 조각을 복사해 2개로 묶은 후 해시값을 계산
3. 계산한 해시값 끼리 다시 2개로 묶는 방식으로 해시값이 하나만 남을 때까지 반복 계산
4. 마지막에 남은 하나의 해시값을 해시 루트 혹은 최상위 해시라고 함.

이 작업을 반복하면 해시값이 다른 파일 조각을 효율적으로 파악하는 것이 가능



#### 해시트리와 해시체인으로 블록 만들기

- 해시 트리를 만든 후 해시 체인으로 묶음.

- 여러 데이터를 블록으로 묶었으므로 블록 단위로 해시 체인의 데이터 개수가 늘어남.

(해시 체인은 새 데이터를 넣을 때마다 해시 체인의 데이터 갯수가 늘어남)

- 해시 트리 기반의 해시 체인은 같은 타임스탬프 숫자에 데이터가 여러개 속할 수 있음.

(해시 체인은 새 데이터가 늘어날 때마다 타임스탬프 숫자가 증가 했음)



### 작업 증명 알고리즘

- 새로 만든 블록 정보를 모든 노드가 공유할 때까지 다음 블록을 만들지 않아야 최신 타임스탬프라는 것을 보장하는 결점을 보완해 완벽한 최신 타임스탬프를 구현하는 블록 생성 방법(합의 알고리즘)의 하나

- 서비스 제공자가 제시한 특정 작업을 완료해야 사용자가 서비스를 이용할 수 있는 것

- 서비스 제공자가 작업 완료를 검증하는 시간이 길면 안됨

- 작업완료 검증은 쉬워야 함

- 대량의 스팸 메일이나 DDos 공격 차단 등 비정상적 서비스의 사용을 막는데 장점







